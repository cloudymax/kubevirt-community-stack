---
core: "cluster-api:v1.11.1"
bootstrap: "kubeadm:v1.11.1"
controlPlane: "kubeadm:v1.11.1"
infrastructure: "kubevirt:v0.1.10"
addon: "v0.3.2"

manager: {}
#  featureGates:
#    kubeadm:
#      MachinePool: true
#      KubeadmBootstrapFormatIgnition: true
#    core:
#      MachinePool: true
#      KubeadmBootstrapFormatIgnition: true
#    kubevirt:
#      MachinePool: true
#      KubeadmBootstrapFormatIgnition: true
#    bootstrap:
#      MachinePool: true
#      KubeadmBootstrapFormatIgnition: true


configSecret: {}

replicaCount: 1

image:
  manager:
    repository: registry.k8s.io/capi-operator/cluster-api-operator
    tag: v0.15.0
    pullPolicy: IfNotPresent

env:
  manager: []

imagePullSecrets: {}

args:
  - --leader-elect

resources:
  manager:
    limits:
      cpu: 100m
      memory: 150Mi
    requests:
      cpu: 100m
      memory: 100Mi

containerSecurityContext: {}

affinity:
  nodeAffinity:
    requiredDuringSchedulingIgnoredDuringExecution:
      nodeSelectorTerms:
        - matchExpressions:
            - key: kubernetes.io/arch
              operator: In
              values:
                - amd64
                - arm64
                - ppc64le
            - key: kubernetes.io/os
              operator: In
              values:
                - linux

tolerations:
  - effect: NoSchedule
    key: node-role.kubernetes.io/master
  - effect: NoSchedule
    key: node-role.kubernetes.io/control-plane

volumes:
  - name: cert
    secret:
      defaultMode: 420
      secretName: capi-operator-webhook-service-cert

volumeMounts:
  manager:
    - mountPath: /tmp/k8s-webhook-server/serving-certs
      name: cert
      readOnly: true
